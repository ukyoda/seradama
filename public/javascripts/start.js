$(function(){var a=function(){var a=$("#game-header"),b=$("#game-display"),c=$(window),d=15,e=a.height()+d,f=c.height()-e-d;b.height(f).css({"padding-top":e,"padding-bottom":d})};a();var b=srdm.Game,c=new b({target:"#game-display"}),d=b.getGravityDirection();(function(){var a=$.Deferred();return b.checkDeviceMotion()?($(window).one("devicemotion",function(){null===event.accelerationIncludingGravity.x?a.reject():a.resolve()}),a):(a.reject(),a)})().done(function(){c.setController("gravity",d)}).fail(function(){window.alert("ご利用の端末では加速度を利用する事が出来ません。画面下のタッチコントローラを使って操作してください"),$("#game-controller").css("display","block"),c.setController("touch","#game-controller")}),window.setInterval(function(){c.onController.call(c,-1)},200),$(window).on("resize",function(){a(),c.rescale.call(c)}),c.start().then(function(){return console.log("animation"),c.animate(),$.Deferred().resolve()}).then(function(){return console.log("socket"),c.socketConnect()}).done(function(){var a=$("#player-picture").val(),b=$("#player-name").val(),d=$("#player-type").val();c.emitInfo({picture:a,name:b,userType:d}),c.rescale.call(c)})});